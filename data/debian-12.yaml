# Debian 12 (Bookworm)
#
# Mapping of pip packages to system-level dependencies required for installation
#
# Syntax:
#
# <pip_package>:
#   build_essentials:  # Core build tools needed
#     - <package>
#   dev_headers:       # Development header packages
#     - <package>
#   system_libs:       # System libraries
#     - <package>
#   python_deps:       # Python-specific dependencies
#     - <package>

_meta:
  os: debian
  version: "12"
  package_manager: apt
  commands:
    update: ${package_manager} update
    install: ${package_manager} install -y
    upgrade: ${package_manager} upgrade -y
    remove: ${package_manager} remove -y
    autoremove: ${package_manager} autoremove -y
    clean: ${package_manager} clean

# Default build dependencies which are commonly needed
_build_essentials:
  - build-essential
  - gcc
  - g++
  - make
  - pkg-config

# Default Python development dependencies
_python_dev:
  - python3-dev
  - python3-pip
  - python3-setuptools
  - python3-wheel
  - python3-venv

# Package mappings
python-ldap:
  dev_headers:
    - libldap2-dev
    - libsasl2-dev
  system_libs:
    - libldap2
    - libsasl2

psycopg2:
  dev_headers:
    - libpq-dev
  python_deps:
    - python3-dev

pillow:
  dev_headers:
    - libjpeg-dev
    - zlib1g-dev
    - libtiff5-dev
    - libfreetype6-dev
    - libwebp-dev
  system_libs:
    - libjpeg62-turbo
    - zlib1g
    - libtiff5
    - libfreetype6
    - libwebp7

cryptography:
  build_essentials:
    - build-essential
  dev_headers:
    - libssl-dev
    - libffi-dev
  system_libs:
    - libssl3
    - libffi8
  python_deps:
    - python3-dev
  build_deps:
    - cargo
    - pkg-config

lxml:
  dev_headers:
    - libxml2-dev
    - libxslt1-dev
  system_libs:
    - libxml2
    - libxslt1.1
  python_deps:
    - python3-dev

mysqlclient:
  dev_headers:
    - default-libmysqlclient-dev
  system_libs:
    - default-libmysqlclient
  python_deps:
    - python3-dev
  build_deps:
    - pkg-config

bonsai:
  dev_headers:
    - libldap2-dev
    - libsasl2-dev
  system_libs:
    - libldap2
    - libsasl2
  python_deps:
    - python3-dev

numpy:
  build_essentials:
    - build-essential
  dev_headers:
    - libopenblas-dev
  system_libs:
    - libopenblas0
  python_deps:
    - python3-dev
  build_deps:
    - gfortran

pandas:
  build_essentials:
    - build-essential
  python_deps:
    - python3-dev
    - python3-numpy

pycairo:
  dev_headers:
    - libcairo2-dev
  system_libs:
    - libcairo2
  python_deps:
    - python3-dev
  build_deps:
    - pkg-config

pycups:
  dev_headers:
    - libcups2-dev
  system_libs:
    - libcups2

python-pam:
  dev_headers:
    - libpam0g-dev
  system_libs:
    - libpam0g

uwsgi:
  build_essentials:
    - build-essential
  python_deps:
    - python3-dev 